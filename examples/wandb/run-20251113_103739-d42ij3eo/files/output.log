2025-11-13 10:37:42,224 | __main__ | INFO | 'Scorer' object instantiated; W&B run initialized.
2025-11-13 10:37:42,231 | __main__ | INFO | Loading in 'ratings' data...
2025-11-13 10:37:46,475 | film_recommender_cg.db_connector | INFO | Successfully read collection 'ratings'. Shape of df: (144960, 4)
2025-11-13 10:37:46,501 | __main__ | INFO | Data successfully loaded!
2025-11-13 10:37:46,504 | __main__ | INFO | Number of 'existing' users: 506 -> Using SVD collaborative filtering model to generate these recommendations...
2025-11-13 10:37:46,507 | __main__ | INFO | Number of 'New' users: 61 -> Falling back to cold-start strategy of recommending top 'n' films by popularity...
2025-11-13 10:37:46,510 | __main__ | INFO | Ratings data loaded successfully.
2025-11-13 10:37:46,690 | film_recommender_cg.db_connector | INFO | Successfully read collection 'genres'. Shape of df: (4877, 2)
2025-11-13 10:37:46,848 | __main__ | INFO | Genres table loaded successfully.
2025-11-13 10:37:46,853 | __main__ | INFO | Loading in model from W&B...
[34m[1mwandb[0m:   1 of 1 files downloaded.
2025-11-13 10:37:48,046 | __main__ | INFO | Model successfully loaded!
2025-11-13 10:37:48,049 | __main__ | INFO | Model imported successfully.
2025-11-13 10:37:48,054 | __main__ | INFO | Scoring for 'existing' users...
2025-11-13 10:38:06,516 | __main__ | INFO | Scoring complete for 'existing' users!
2025-11-13 10:38:06,545 | __main__ | INFO | Rankings for existing users generated successfully.
2025-11-13 10:38:06,547 | __main__ | INFO | Scoring for 'new' users...
2025-11-13 10:38:06,576 | __main__ | INFO | Scoring complete for 'new' users!
2025-11-13 10:38:06,579 | __main__ | INFO | Rankings for new users generated successfully.
2025-11-13 10:38:06,581 | __main__ | INFO | Simulating interactions for 'existing' users...
2025-11-13 10:38:08,775 | __main__ | INFO | Simulation of 'existing' users complete!
2025-11-13 10:38:08,779 | __main__ | INFO | New interactions for existing users simulated successfully.
2025-11-13 10:38:08,782 | __main__ | INFO | Simulating interactions for 'new' users...
2025-11-13 10:38:09,066 | __main__ | INFO | Simulation of 'new' users complete!
2025-11-13 10:38:09,069 | __main__ | INFO | New interactions for new users simulated successfully.
2025-11-13 10:38:09,072 | __main__ | INFO | Updating ratings table...
2025-11-13 10:38:14,885 | film_recommender_cg.db_connector | INFO | Inserted 5860 documents into 'ratings'.
2025-11-13 10:38:14,891 | __main__ | INFO | Ratings table updated.
2025-11-13 10:38:14,897 | __main__ | INFO | Ratings table updated successfully.
2025-11-13 10:38:14,906 | __main__ | INFO | All processing completed successfully.
2025-11-13 10:38:17,653 | __main__ | INFO | ### Genre average counts in top 100 recommendations (all users): ###
2025-11-13 10:38:17,656 | __main__ | INFO | Horror = 5.6
2025-11-13 10:38:17,658 | __main__ | INFO | War = 6.0
2025-11-13 10:38:17,661 | __main__ | INFO | Action = 13.0
2025-11-13 10:38:17,665 | __main__ | INFO | Animation = 2.7
2025-11-13 10:38:17,667 | __main__ | INFO | Documentary = 3.9
2025-11-13 10:38:17,670 | __main__ | INFO | Mystery = 9.6
2025-11-13 10:38:17,678 | __main__ | INFO | Foreign = 1.6
2025-11-13 10:38:17,681 | __main__ | INFO | Fantasy = 6.4
2025-11-13 10:38:17,684 | __main__ | INFO | Family = 5.4
2025-11-13 10:38:17,689 | __main__ | INFO | Crime = 15.6
2025-11-13 10:38:17,693 | __main__ | INFO | History = 3.7
2025-11-13 10:38:17,696 | __main__ | INFO | TV Movie = 0.2
2025-11-13 10:38:17,698 | __main__ | INFO | Comedy = 30.0
2025-11-13 10:38:17,701 | __main__ | INFO | Adventure = 9.6
2025-11-13 10:38:17,704 | __main__ | INFO | Science Fiction = 6.4
2025-11-13 10:38:17,711 | __main__ | INFO | Thriller = 20.4
2025-11-13 10:38:17,713 | __main__ | INFO | Undisclosed = 0.0
2025-11-13 10:38:17,716 | __main__ | INFO | Drama = 65.3
2025-11-13 10:38:17,720 | __main__ | INFO | Western = 3.2
2025-11-13 10:38:17,733 | __main__ | INFO | Romance = 21.4
2025-11-13 10:38:17,735 | __main__ | INFO | Music = 3.8
2025-11-13 10:38:19,029 | __main__ | INFO | 'scoring_genre_avg_count_in_top_n_recs_all_users' successfully logged as artifact in W&B.
2025-11-13 10:38:19,413 | __main__ | INFO | ### Genre average counts in top 100 recommendations (new users): ###
2025-11-13 10:38:19,416 | __main__ | INFO | Horror = 4.1
2025-11-13 10:38:19,420 | __main__ | INFO | War = 5.0
2025-11-13 10:38:19,424 | __main__ | INFO | Action = 28.5
2025-11-13 10:38:19,431 | __main__ | INFO | Animation = 7.0
2025-11-13 10:38:19,434 | __main__ | INFO | Documentary = 0.0
2025-11-13 10:38:19,441 | __main__ | INFO | Mystery = 7.9
2025-11-13 10:38:19,444 | __main__ | INFO | Foreign = 0.0
2025-11-13 10:38:19,451 | __main__ | INFO | Fantasy = 16.4
2025-11-13 10:38:19,456 | __main__ | INFO | Family = 12.9
2025-11-13 10:38:19,460 | __main__ | INFO | Crime = 19.6
2025-11-13 10:38:19,473 | __main__ | INFO | History = 3.9
2025-11-13 10:38:19,479 | __main__ | INFO | TV Movie = 0.0
2025-11-13 10:38:19,483 | __main__ | INFO | Comedy = 26.6
2025-11-13 10:38:19,489 | __main__ | INFO | Adventure = 29.6
2025-11-13 10:38:19,492 | __main__ | INFO | Science Fiction = 20.6
2025-11-13 10:38:19,497 | __main__ | INFO | Thriller = 26.7
2025-11-13 10:38:19,502 | __main__ | INFO | Undisclosed = 0.0
2025-11-13 10:38:19,505 | __main__ | INFO | Drama = 43.7
2025-11-13 10:38:19,517 | __main__ | INFO | Western = 1.0
2025-11-13 10:38:19,523 | __main__ | INFO | Romance = 13.0
2025-11-13 10:38:19,528 | __main__ | INFO | Music = 2.0
2025-11-13 10:38:20,869 | __main__ | INFO | 'scoring_genre_avg_count_in_top_n_recs_new_users' successfully logged as artifact in W&B.
2025-11-13 10:38:23,226 | __main__ | INFO | ### Genre average counts in top 100 recommendations (existing users): ###
2025-11-13 10:38:23,228 | __main__ | INFO | Horror = 5.8
2025-11-13 10:38:23,233 | __main__ | INFO | War = 6.2
2025-11-13 10:38:23,236 | __main__ | INFO | Action = 11.2
2025-11-13 10:38:23,239 | __main__ | INFO | Animation = 2.2
2025-11-13 10:38:23,242 | __main__ | INFO | Documentary = 4.4
2025-11-13 10:38:23,246 | __main__ | INFO | Mystery = 9.8
2025-11-13 10:38:23,250 | __main__ | INFO | Foreign = 1.8
2025-11-13 10:38:23,253 | __main__ | INFO | Fantasy = 5.2
2025-11-13 10:38:23,259 | __main__ | INFO | Family = 4.4
2025-11-13 10:38:23,264 | __main__ | INFO | Crime = 15.1
2025-11-13 10:38:23,269 | __main__ | INFO | History = 3.6
2025-11-13 10:38:23,272 | __main__ | INFO | TV Movie = 0.2
2025-11-13 10:38:23,280 | __main__ | INFO | Comedy = 30.4
2025-11-13 10:38:23,283 | __main__ | INFO | Adventure = 7.2
2025-11-13 10:38:23,286 | __main__ | INFO | Science Fiction = 4.7
2025-11-13 10:38:23,289 | __main__ | INFO | Thriller = 19.6
2025-11-13 10:38:23,295 | __main__ | INFO | Undisclosed = 0.0
2025-11-13 10:38:23,297 | __main__ | INFO | Drama = 67.9
2025-11-13 10:38:23,300 | __main__ | INFO | Western = 3.4
2025-11-13 10:38:23,306 | __main__ | INFO | Romance = 22.4
2025-11-13 10:38:23,310 | __main__ | INFO | Music = 4.0
2025-11-13 10:38:24,612 | __main__ | INFO | 'scoring_genre_avg_count_in_top_n_recs_existing_users' successfully logged as artifact in W&B.
2025-11-13 10:38:24,680 | __main__ | INFO | ### Coverage for scoring session ('All' users): 50.49% ###
2025-11-13 10:38:25,968 | __main__ | INFO | 'scoring_coverage_all_users' successfully logged as artifact in W&B.
2025-11-13 10:38:25,977 | __main__ | INFO | ### Coverage for scoring session ('New' users): 3.65% ###
2025-11-13 10:38:27,277 | __main__ | INFO | 'scoring_coverage_new_users' successfully logged as artifact in W&B.
2025-11-13 10:38:27,307 | __main__ | INFO | ### Coverage for scoring session ('Existing' users): 48.33% ###
2025-11-13 10:38:28,516 | __main__ | INFO | 'scoring_coverage_existing_users' successfully logged as artifact in W&B.
2025-11-13 10:38:29,295 | __main__ | INFO | ### Mean diversity score for scoring session ('All'): 0.98 ###
2025-11-13 10:38:30,677 | __main__ | INFO | 'scoring_avg_diversity_score_all_users' successfully logged as artifact in W&B.
2025-11-13 10:38:31,691 | __main__ | INFO | ### Mean diversity score for scoring session ('New'): 0.99 ###
2025-11-13 10:38:33,162 | __main__ | INFO | 'scoring_avg_diversity_score_new_users' successfully logged as artifact in W&B.
2025-11-13 10:38:34,205 | __main__ | INFO | ### Mean diversity score for scoring session ('Existing'): 0.98 ###
2025-11-13 10:38:35,613 | __main__ | INFO | 'scoring_avg_diversity_score_existing_users' successfully logged as artifact in W&B.
DEBUGGING RANKINGS GENERATED user_id
1      {1361: 4.064562786905301, 953: 4.0342720663969...
2      {1284: 3.807838551184971, 4826: 3.765604851722...
3      {2726: 3.6143226347275075, 2019: 3.56986092304...
4      {1162: 3.9536712763515394, 1147: 3.90884556284...
5      {1284: 4.2676570574115225, 1006: 4.26696322554...
                             ...
113    {318: 4.398477157360406, 296: 4.20744680851063...
373    {318: 4.398477157360406, 296: 4.20744680851063...
121    {318: 4.398477157360406, 296: 4.20744680851063...
381    {318: 4.398477157360406, 296: 4.20744680851063...
383    {318: 4.398477157360406, 296: 4.20744680851063...
Length: 567, dtype: object
2025-11-13 10:38:35,722 | __main__ | ERROR | Error occurred in getting average personalization scores.
Traceback (most recent call last):
  File "/app/Streaming_Service_Recommendation_Simulation/film_recommender_cg/scorer.py", line 450, in get_avg_personalization_scores
    score = self._get_avg_personalization_score(user_group, plot_boxplots, plot_scores_by_num_films_rated)
  File "/app/Streaming_Service_Recommendation_Simulation/film_recommender_cg/scorer.py", line 482, in _get_avg_personalization_score
    all_film_ids = sorted({film_id for recs in rankings_generated.values() for film_id in recs.keys()})
TypeError: 'numpy.ndarray' object is not callable
